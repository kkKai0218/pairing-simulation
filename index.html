<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>é…å°æ¨¡æ“¬éŠæˆ²</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { color: #333; }
    label, input { margin: 8px 0; display: block; }
    button { padding: 8px 16px; margin-top: 10px; }
    .log { margin-top: 20px; white-space: pre-wrap; background: #f5f5f5; padding: 10px; border-radius: 6px; }
    .rules { background: #eef; padding: 10px; border-radius: 6px; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>è¿·äº†è·¯ï¼Œä¹Ÿè¿·äº†äºº?ç†å·¥ç”·ä¹Ÿèƒ½å¾—åˆ°æ„›æƒ…å—?</h1>

  <div class="rules">
    <h3>ğŸ“œ éŠæˆ²è¦å‰‡èªªæ˜ï¼š</h3>
    <p>æœ¬éŠæˆ²æ¨¡æ“¬ç”·åƒåŠ è€…åœ¨å…©é—œé¸æ“‡èˆ‡äº’å‹•å¾Œï¼Œæ˜¯å¦èƒ½æˆåŠŸèˆ‡å¿ƒå„€å¥³ç”Ÿé…å°ã€‚</p>

    <p>ğŸ”¹ <strong>ç¬¬ä¸€é—œå¡ï¼šç­”é¡Œé¸é–€</strong><br>
    ç”·åƒåŠ è€…é¢å°å››æ‰‡é–€ï¼šAã€Bã€Cã€Dã€‚<br>
    ä»–å…ˆé¸ä¸€æ‰‡é–€ï¼ˆå¦‚ Aï¼‰ï¼Œæ¥è‘—æœƒçœ‹åˆ°é¡Œç›®ã€‚<br>
    çœ‹å®Œé¡Œç›®å¾Œï¼Œä»–å¯ä»¥é¸æ“‡æ˜¯å¦æ›´æ›ä¸€æ¬¡é–€ï¼ˆä¾‹å¦‚æ”¹é¸ Cï¼‰ã€‚<br>
    è‹¥å›ç­”æ­£ç¢ºï¼Œå‰‡é€²å…¥ç¬¬äºŒé—œï¼›è‹¥ç­”éŒ¯å‰‡æ·˜æ±°ã€‚</p>

    <p>ğŸ”¹ <strong>ç¬¬äºŒé—œå¡ï¼šå¥³ç”Ÿé¸æ“‡</strong><br>
    æ¯ä¸€æ‰‡ç¬¬ä¸€é—œçš„é–€ï¼Œæœƒå°æ‡‰åˆ°ä¸åŒçš„å¥³ç”Ÿåˆ†çµ„çµ„åˆï¼ˆå…©æ‰‡é–€ï¼‰ï¼š</p>
    <table border="1" cellpadding="6">
      <tr><th>ç¬¬ä¸€é—œé–€</th><th>å°æ‡‰ç¬¬äºŒé—œå…©é“é–€çš„æç¤º(é–€å¾Œå¥³ç”Ÿçš„å…±é€šé»)</th></tr>
      <tr><td>A</td><td>[K-pop] å’Œ [åŒå¹´ç´€]</td></tr>
      <tr><td>B</td><td>[æ—©ä¸Šæ²’äº‹ï¼Œæ™šä¸Šå°ä¸­å¸‚] å’Œ [åŒ–å¦å¾Œäº”å®˜æ·±é‚ƒ]</td></tr>
      <tr><td>C</td><td>[èº«é«˜173cm] å’Œ [å¾ˆæœƒè·³èˆ]</td></tr>
      <tr><td>D</td><td>[æ­ªåœ‹äºº] å’Œ [æ„›ä½ ] </td></tr>
    </table>

    <p>æµç¨‹å¦‚ä¸‹ï¼š</p>
    <ul>
      <li>ç”·ç”Ÿé¢å°é€™å…©æ‰‡é–€ï¼Œé¸ä¸€æ‰‡æ‰“é–‹ â†’ çœ‹è¦‹è£¡é¢çš„å¥³ç”Ÿå€‘ã€‚</li>
      <li>æ¯ä½å¥³ç”Ÿå„è‡ªæ±ºå®šæ˜¯å¦å°é€™ä½ç”·ç”Ÿèªª "Yes"ï¼ˆæ©Ÿç‡ p_yesï¼‰ã€‚</li>
      <li>è‹¥æ‰€æœ‰å¥³ç”Ÿéƒ½èªª "No"ï¼Œå‰‡é…å°å¤±æ•—ã€‚</li>
      <li>è‹¥åªæœ‰ä¸€ä½èªª "Yes"ï¼Œå‰‡ç›´æ¥é…å°æˆåŠŸã€‚</li>
      <li>è‹¥æœ‰å…©ä½éƒ½èªª "Yes"ï¼Œç”·ç”Ÿå¯ä»¥å¾ä¸­é¸ä¸€ä½å–œæ­¡çš„å¥³ç”Ÿ â†’ é…å°æˆåŠŸã€‚</li>
    </ul>

<img src="Summer Vibes.jpg" alt="girls" width="500" height="500">

    <p><strong>å¥³ç”Ÿå€‹åˆ¥åŒæ„é…å°çš„æ©Ÿç‡å¦‚ä¸‹ï¼š</strong></p>
    <ul>
      <li>1 è™Ÿ å¼µå“¡ç‘›ï¼š50%</li>
      <li>2 è™Ÿ LISAï¼š70%</li>
      <li>3 è™Ÿ ç‹å¿ƒå‡Œï¼š40%</li>
      <li>4 è™Ÿ å®‰æµ·ç‘Ÿè–‡ï¼š20%</li>
    </ul>
  </div>

  <label for="rounds">æ¨¡æ“¬æ¬¡æ•¸(æ²’æœ‰æ¬¡æ•¸é™åˆ¶ï¼Œä½†æ˜¯ä½ è¦æœ‰è€å¿ƒï¼Œè‹¥æ˜¯å¤±æ•—å°±æ˜¯è¨­å‚™å•é¡Œ)ï¼š</label>
  <input type="number" id="rounds" value="10">

  <label for="pCorrect">ç¬¬ä¸€é—œç­”å°æ©Ÿç‡ï¼ˆ0~1ï¼‰ï¼š</label>
  <input type="number" id="pCorrect" value="0.7" step="0.01">

  <label for="pSwitch">æ˜¯å¦æ›é–€æ©Ÿç‡ï¼ˆ0~1ï¼‰ï¼š</label>
  <input type="number" id="pSwitch" value="0.5" step="0.01">

  <button onclick="runSimulation()">é–‹å§‹æ¨¡æ“¬</button>

  <div class="log" id="output"></div>

  <script>
    const girls = {
      1: { name: "å¼µå“¡ç‘›", prob: 0.5 },
      2: { name: "LISA", prob: 0.7 },
      3: { name: "ç‹å¿ƒå‡Œ", prob: 0.4 },
      4: { name: "å®‰æµ·ç‘Ÿè–‡", prob: 0.2 },
    };

    const secondGateMapping = {
      A: [[1, 2], [3, 4]],
      B: [[1, 3], [2, 4]],
      C: [[1, 4], [2, 3]],
      D: [[1, 2, 4], [3]]
    };

    function girlResponse(id) {
      return Math.random() < girls[id].prob;
    }

    function simulateOne(pCorrect, pSwitch) {
      const doors = ['A', 'B', 'C', 'D'];
      const initial = doors[Math.floor(Math.random() * 4)];
      const change = Math.random() < pSwitch;
      const final = change ? doors.filter(d => d !== initial)[Math.floor(Math.random() * 3)] : initial;

      let log = `\n>>> ç”·ç”Ÿé¸æ“‡é–€ ${initial}${change ? ` â†’ æ›æˆé–€ ${final}` : ''}`;

      if (Math.random() >= pCorrect) {
        log += `\nç¬¬ä¸€é—œç­”éŒ¯ï¼Œæ·˜æ±°ã€‚`;
        return { door: final, success: false, girl: null, log };
      }

      const groupOptions = secondGateMapping[final];
      const chosenGroup = groupOptions[Math.floor(Math.random() * groupOptions.length)];
      log += `\nç¬¬äºŒé—œé‡åˆ°å¥³ç”Ÿï¼š` + chosenGroup.map(id => `${girls[id].name}`).join('ã€');

      const yesGirls = chosenGroup.filter(id => girlResponse(id));
      if (yesGirls.length === 0) {
        log += `\nâ†’ æ‰€æœ‰å¥³ç”Ÿèªª Noï¼Œé…å°å¤±æ•—ã€‚`;
        return { door: final, success: false, girl: null, log };
      } else {
        const chosen = yesGirls[Math.floor(Math.random() * yesGirls.length)];
        log += `\nâ†’ ${yesGirls.map(id => girls[id].name).join('ã€')} èªª Yesï¼Œç”·ç”Ÿé¸æ“‡äº† ${girls[chosen].name} â†’ æˆåŠŸï¼`;
        return { door: final, success: true, girl: chosen, log };
      }
    }

    function runSimulation() {
      const rounds = parseInt(document.getElementById('rounds').value);
      const pCorrect = parseFloat(document.getElementById('pCorrect').value);
      const pSwitch = parseFloat(document.getElementById('pSwitch').value);

      const girlStats = {
        1: { name: girls[1].name, count: 0 },
        2: { name: girls[2].name, count: 0 },
        3: { name: girls[3].name, count: 0 },
        4: { name: girls[4].name, count: 0 }
      };

      let totalSuccess = 0;
      let logs = [];

      for (let i = 0; i < rounds; i++) {
        const sim = simulateOne(pCorrect, pSwitch);
        if (sim.success) {
          totalSuccess++;
          if (sim.girl) girlStats[sim.girl].count++;
        }
        logs.push(`ç¬¬ ${i + 1} å›åˆï¼š` + sim.log);
      }

      let summary = `\n==== å„å¥³ç”Ÿèˆ‡ç”·ç”Ÿé…å°æˆåŠŸæ¬¡æ•¸ ====`;
      for (const id in girlStats) {
        const rate = (girlStats[id].count / rounds * 100).toFixed(2);
        summary += `\n${girlStats[id].name}ï¼š${girlStats[id].count} æ¬¡ï¼ˆ${rate}%ï¼‰`;
      }

      const overallRate = (totalSuccess / rounds * 100).toFixed(2);
      summary += `\n\n==== ç”·åƒåŠ è€…æ•´é«”æˆåŠŸç‡ï¼š${overallRate}% (${totalSuccess}/${rounds}) ====`;

      const mostMatched = Object.values(girlStats).reduce((a, b) => (a.count >= b.count ? a : b), { name: "ï¼ˆç„¡ï¼‰", count: -1 });
      summary += `\n\nğŸ¯ çµè«–ï¼šåœ¨æœ¬æ¬¡æ¨¡æ“¬ä¸­ï¼Œç”·åƒåŠ è€…èˆ‡ ${mostMatched.name} é…å°æœ€æˆåŠŸã€‚æ›é–€èˆ‡ç­”å°æ©Ÿç‡æœƒæ˜é¡¯å½±éŸ¿æ•´é«”æˆåŠŸç‡èˆ‡é…å°å°è±¡åˆ†å¸ƒã€‚`;

      document.getElementById('output').textContent = logs.join('\n') + summary;
    }
  </script>
</body>
</html>